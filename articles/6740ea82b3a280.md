---
title: "GitHubãƒªãƒã‚¸ãƒˆãƒªã‚’å¤§é‡ã«ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã™ã‚‹" # è¨˜äº‹ã®ã‚¿ã‚¤ãƒˆãƒ«
emoji: "ğŸ—¼" # ã‚¢ã‚¤ã‚­ãƒ£ãƒƒãƒã¨ã—ã¦ä½¿ã‚ã‚Œã‚‹çµµæ–‡å­—ï¼ˆ1æ–‡å­—ã ã‘ï¼‰
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢è¨˜äº‹
topics: ["github"] # ã‚¿ã‚°ã€‚["markdown", "rust", "aws"]ã®ã‚ˆã†ã«æŒ‡å®šã™ã‚‹
published: true # å…¬é–‹è¨­å®šï¼ˆfalseã«ã™ã‚‹ã¨ä¸‹æ›¸ãï¼‰
---

# ã‚³ãƒãƒ³ãƒ‰

ä½¿ã‚ãªã„ãƒªãƒã‚¸ãƒˆãƒªã¯ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã—ã¦ãŠããŸã„ã€‚GitHub ã® Web UI ã‹ã‚‰ã§ã¯å¤§é‡ã«ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã™ã‚‹ã“ã¨ãŒé›£ã—ã„ãŒ [gh](https://cli.github.com/) ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã†ã¨ç°¡å˜ã«ã§ãã‚‹ã€‚gh ã«ã¯ yes ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒã‚ã‚‹ã®ã§ _"Please type **reponame/username** to comfirm"_ ã®ã‚ˆã†ãªå•ã„ã‹ã‘ã‚’ç„¡è¦–ã—ã¦ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚

```bash
gh repo list --source --no-archived --visibility=public --limit 100 --json name,updatedAt --jq '.[] | [.updatedAt, .name] | @tsv' | sort | fzf --multi | awk '{print $2}' | GITHUB_TOKEN=$github_token_repo_archiver xargs -I{} gh repo archive --yes {}
```

<!-- ![](https://storage.googleapis.com/zenn-user-upload/bbfb3a7e9984-20250115.gif) -->

![](/images/6740ea82b3a280/bbfb3a7e9984-20250115.gif)

# è£œè¶³

å¯¾è±¡ãƒªãƒã‚¸ãƒˆãƒªã‚’çµã‚‹æ¡ä»¶ã¯æ¬¡ã®é€šã‚Šã€‚

- ãƒ•ã‚©ãƒ¼ã‚¯ã§ã¯ãªã„ (`--source`)
- ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã•ã‚Œã¦ã„ãªã„ (`--no-archived`)
- Public ã§ã‚ã‚‹ (`--visibility=public`)

ã¾ãŸã€[Fine-grained personal access tokens](https://docs.github.com/authentication/keeping-your-account-and-data-secure/managing-your-personal-access-tokens)ã‚’ä½¿ã†å ´åˆã€ãƒˆãƒ¼ã‚¯ãƒ³ã«ä»¥ä¸‹ã®æ¨©é™ã‚’ä»˜ä¸ã™ã‚‹ã€‚

- Repository access
	- `All repositories`
- Permissions
	- `Contents`: Read and write
	- `Admission`: Read and write

:::details ç·¨é›†ã—ã‚„ã™ã„ã‚ˆã†ã«æ”¹è¡Œã—ãŸã‚³ãƒãƒ³ãƒ‰
```bash
gh repo list --source --no-archived --visibility=public \
--limit 100 \
--json name,updatedAt \
--jq '.[] | [.updatedAt, .name] | @tsv' \
| sort \
| fzf --multi \
| awk '{print $2}' \
| GITHUB_TOKEN=$github_token_repo_archiver \
xargs -I{} gh repo archive --yes {}
```
:::

:::details private ã‚„ fork ã‚‚å¯¾è±¡ã«å«ã‚ã‚‹ã‚³ãƒãƒ³ãƒ‰
```bash
GITHUB_TOKEN=$github_token_repo_archiver gh repo list --no-archived --limit 200 --json name,updatedAt,visibility --jq '.[] | [.updatedAt, .visibility, .name] | @tsv' | sort | fzf --multi | awk '{print $3}' | GITHUB_TOKEN=$github_token_repo_archiver xargs -I{} gh repo archive --yes {}
```
:::

